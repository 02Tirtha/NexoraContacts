<link href="/css/output.css" rel="stylesheet">
<!-- <link href="/css/style.css" rel="stylesheet"> -->
<style>
  input:-webkit-autofill {
    background-color: transparent !important;
    -webkit-box-shadow: 0 0 0px 1000px #1f2937 inset !important; /* Tailwind's bg-gray-800 */
    -webkit-text-fill-color: white !important;
    transition: background-color 4000s ease-in-out 0s;
  }

  input:-webkit-autofill:focus {
    -webkit-box-shadow: 0 0 0px 1000px #1f2937 inset !important;
    -webkit-text-fill-color: white !important;
  }

   .or-divider {
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 20px 0;
      width: 100%;
    }

    .or-divider::before,
    .or-divider::after {
      content: "";
      flex: 1;
      height: 1px;
      background-color: #6b6b6b; /* Grey color */
    }

    .or-divider span {
      margin: 0 10px;
      color: #a4a4a4;
      font-size: 14px;
      white-space: nowrap;
    }
</style>

  <!-- NavBar -->
      <div th:insert="~{navbar::navbar}"></div>

<section class="min-h-screen flex items-center justify-center bg-gray-200 dark:bg-gray-900 px-4 relative overflow-hidden">
  <div th:if="${param.error} == 'disabled'" class="text-red-600">
    Your account is not yet enabled. Please contact support.
</div>

  <!-- Blurred Background Layer -->
  <div class="absolute inset-0 bg-cover bg-center bg-[url('/images/bg.jpg')] filter blur-sm opacity-40 z-0"></div>

  <!-- Login Card -->
  <div class="relative z-10 w-full max-w-md bg-white dark:bg-gray-800 rounded-xl shadow-xl border dark:border-gray-700 p-8 sm:p-10">
       
    <h1 class="text-2xl font-bold text-gray-900 dark:text-white mb-6 text-center">Login to your account</h1>
    
    <form action="/perform-login" method="post" class="space-y-5">
 
      <!-- Email -->
      <div class="relative z-0 w-full  group">
    <input 
    type="email" 
    name="email" 
    id="email" 
    required autocomplete="email"
    class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none 
             dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 
             focus:border-blue-600 peer " 
    placeholder=" " 
    />
    <label for="email"
      class="absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-1 -z-10 origin-[0] 
             peer-focus:start-0 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 
             peer-focus:scale-75 peer-focus:-translate-y-6 peer-focus:text-blue-600 peer-focus:dark:text-blue-500
             ">
      Email address
    </label>
  </div>

      <!-- Password -->
      <div class="relative z-0 w-full mb-8 group mt-4">
    <input type="password" name="password" id="password" required
      class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none 
             dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 
             focus:border-blue-600 peer" placeholder=" " />
    <label for="password"
      class="absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] 
             peer-focus:start-0 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 
             peer-focus:scale-75 peer-focus:-translate-y-6 peer-focus:text-blue-600 peer-focus:dark:text-blue-500">
      Password
    </label>
  </div>

      <!-- Error message -->
  <div id="login-error"
     class="hidden text-red-500 text-sm mt-1 text-center font-medium ">
  Invalid email or password. Please try again.
</div>


      <!-- Submit Button -->
      <button type="submit"
        class="mt-4 w-full py-2.5 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-300 dark:focus:ring-blue-500 transition-all">
        Sign in
      </button>

      <!-- Sign Up Redirect -->
    <p class="text-sm font-light text-gray-500 dark:text-gray-400 mt-3.5 text-center">
      Donâ€™t have an account yet?
      <a  th:href="@{/signup}" class="font-medium text-blue-600 hover:underline dark:text-blue-400">Sign up</a>
    </p>

     
    </form>

   <!-- OR Divider -->
    <div class="or-divider">
      <span>OR</span>
    </div>



<!-- Google OAuth Button -->
<div class="flex justify-center mt-3">
  <a href="/oauth2/authorization/google"
     class="bg-white text-gray-800 
            dark:bg-gray-800 dark:text-white 
            border-2 border-gray-300 dark:border-gray-600 
            hover:bg-gray-100 dark:hover:bg-gray-700 
            focus:ring-4 focus:outline-none 
            focus:ring-gray-200 dark:focus:ring-gray-500 
            font-medium rounded-lg text-sm px-5 py-2.5 
            inline-flex items-center 
            transition-all duration-300 ease-in-out">
    
    <svg class="w-4 h-4 mr-2" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
         fill="currentColor" viewBox="0 0 18 19">
      <path fill-rule="evenodd"
            d="M8.842 18.083a8.8 8.8 0 0 1-8.65-8.948 
               8.841 8.841 0 0 1 8.8-8.652h.153a8.464 8.464 
               0 0 1 5.7 2.257l-2.193 2.038A5.27 5.27 0 0 0 
               9.09 3.4a5.882 5.882 0 0 0-.2 11.76h.124a5.091 
               5.091 0 0 0 5.248-4.057L14.3 11H9V8h8.34c.066.543.095 
               1.09.088 1.636-.086 5.053-3.463 8.449-8.4 
               8.449l-.186-.002Z"
            clip-rule="evenodd"/>
    </svg>
    Sign in with Google
  </a>
</div>


  </div>
</section>
<script>
  window.addEventListener("DOMContentLoaded", function () {
    const params = new URLSearchParams(window.location.search);
    const errorDiv = document.getElementById("login-error");

    // Show error only if URL has ?error=true
    if (params.get("error") === "true") {
      errorDiv.classList.remove("hidden");
    // Remove '?error=true' from URL without reloading the page
      const cleanUrl = window.location.origin + window.location.pathname;
      window.history.replaceState({}, document.title, cleanUrl);
    }
  });
</script>

 <script th:src="@{'/script/script.js'}"></script>